(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-376e9dd0"],{"2b2e":function(t,a,n){"use strict";var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"navigate-bar"},[n("span",{staticClass:"iconfont iconjiantou2",on:{click:function(a){return t.$router.back()}}}),n("strong",[t._v(t._s(t.title))]),t.showHome?n("span",{staticClass:"iconfont iconshouye",on:{click:function(a){return t.$router.push("/")}}}):n("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])},e=[],o={props:["title","showHome"]},i=o,r=(n("74fe"),n("2877")),c=Object(r["a"])(i,s,e,!1,null,"f394358c",null);a["a"]=c.exports},"34a6":function(t,a,n){"use strict";var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"listbar"},[n("router-link",{attrs:{to:t.path||"#"}},[n("div",[t._v(t._s(t.label))]),n("div",{staticClass:"tips"},[t._v(" "+t._s(t.tips)+" "),n("span",{staticClass:"iconfont iconjiantou1"})])])],1)},e=[],o={props:["label","tips","path"]},i=o,r=(n("d3d0"),n("2877")),c=Object(r["a"])(i,s,e,!1,null,"01288fd6",null);a["a"]=c.exports},"62d2":function(t,a,n){},"63a7":function(t,a,n){},7442:function(t,a,n){},"74fe":function(t,a,n){"use strict";var s=n("63a7"),e=n.n(s);e.a},d3d0:function(t,a,n){"use strict";var s=n("62d2"),e=n.n(s);e.a},fb5e:function(t,a,n){"use strict";n.r(a);var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"container"},[n("NavigateBar",{attrs:{title:"编辑资料"}}),n("div",{staticClass:"avater"},[n("img",{attrs:{src:t.$axios.defaults.baseURL+t.userInfo.head_img}}),n("van-uploader",{staticClass:"uploader",attrs:{"after-read":t.afterRead}})],1),n("Listbar",{attrs:{label:"昵称",tips:t.userInfo.nickname},nativeOn:{click:function(a){t.show=!0}}}),n("Listbar",{attrs:{label:"密码",tips:"******"},nativeOn:{click:function(a){t.showPassword=!0}}}),n("Listbar",{attrs:{label:"性别",tips:["女","男"][t.userInfo.gender]},nativeOn:{click:function(a){t.showGender=!0}}}),n("van-dialog",{attrs:{title:"请输入昵称","show-cancel-button":""},on:{confirm:t.handleChangeNickname},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:t.nickname,callback:function(a){t.nickname=a},expression:"nickname"}})],1),n("van-dialog",{attrs:{title:"*****","show-cancel-button":""},on:{confirm:t.handleChangePassword},model:{value:t.showPassword,callback:function(a){t.showPassword=a},expression:"showPassword"}},[n("van-field",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1),n("van-action-sheet",{attrs:{actions:t.actions,"close-on-click-action":""},on:{select:t.onSelect},model:{value:t.showGender,callback:function(a){t.showGender=a},expression:"showGender"}})],1)},e=[],o=n("2b2e"),i=n("34a6"),r={components:{NavigateBar:o["a"],Listbar:i["a"]},data:function(){return{userInfo:{},userJson:{},show:!1,showPassword:!1,showGender:!1,nickname:"",password:"",actions:[{name:"男",vlue:1},{name:"女",vlue:0}]}},mounted:function(){var t=this,a=localStorage.getItem("userInfo"),n=JSON.parse(a);this.userJson=n,this.$axios({url:"/user/"+n.user.id,headers:{Authorization:n.token}}).then((function(a){var n=a.data.data;t.userInfo=n,t.nickname=n.nickname,t.password=n.password}))},methods:{afterRead:function(t){var a=this,n=new FormData;n.append("file",t.file),this.$axios({url:"/upload",method:"POST",headers:{Authorization:this.userJson.token},data:n}).then((function(t){var n=t.data.data.url;a.userInfo.head_img=n,a.handleEdit({head_img:n})}))},handleEdit:function(t){var a=this;return this.$axios({method:"POST",url:"/user_update/"+this.userInfo.id,headers:{Authorization:this.userJson.token},data:t}).then((function(t){var n=t.data.message;a.$toast.success(n)}))},handleChangeNickname:function(){var t=this,a=this.handleEdit({nickname:this.nickname});a.then((function(){t.userInfo.nickname=t.nickname}))},handleChangePassword:function(){var t=this,a=this.handleEdit({password:this.password});a.then((function(){t.userInfo.password=t.password}))},onSelect:function(t){var a=this;console.log(t);var n=this.handleEdit({gender:t.gender});n.then((function(){a.userInfo.gender=t.vlue}))}}},c=r,l=(n("fd5d"),n("2877")),u=Object(l["a"])(c,s,e,!1,null,"648778a8",null);a["default"]=u.exports},fd5d:function(t,a,n){"use strict";var s=n("7442"),e=n.n(s);e.a}}]);
//# sourceMappingURL=chunk-376e9dd0.935ba64c.js.map